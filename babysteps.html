<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-03-18">

<title>ReproRepo - Baby Steps for a Reproducible Workflow in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ReproRepo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tutorials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="./babysteps.html">
 <span class="dropdown-text">Babysteps for reproducible workflow in R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./04-notebooks/00-simulate-data.html">
 <span class="dropdown-text">- Simulating data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./04-notebooks/01-prepare-data.html">
 <span class="dropdown-text">- Preparing sata with reproducibility</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./04-notebooks/02-create-tables-and-figures.html">
 <span class="dropdown-text">- Creating reproducible tables and figures</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./contact.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#step-one-creating-project-and-folder-structure" id="toc-step-one-creating-project-and-folder-structure" class="nav-link active" data-scroll-target="#step-one-creating-project-and-folder-structure"><span class="header-section-number">1</span> STEP ONE: Creating project and folder structure</a>
  <ul class="collapse">
  <li><a href="#create-a-rstudio-project" id="toc-create-a-rstudio-project" class="nav-link" data-scroll-target="#create-a-rstudio-project"><span class="header-section-number">1.1</span> Create a RStudio project</a></li>
  <li><a href="#creating-the-project-folder-structure" id="toc-creating-the-project-folder-structure" class="nav-link" data-scroll-target="#creating-the-project-folder-structure"><span class="header-section-number">1.2</span> Creating the project folder structure</a></li>
  </ul></li>
  <li><a href="#step-two-preparing-and-analysing-data-and-generating-reproducible-tables-and-figures" id="toc-step-two-preparing-and-analysing-data-and-generating-reproducible-tables-and-figures" class="nav-link" data-scroll-target="#step-two-preparing-and-analysing-data-and-generating-reproducible-tables-and-figures"><span class="header-section-number">2</span> STEP TWO: Preparing and analysing data and generating reproducible tables and figures</a>
  <ul class="collapse">
  <li><a href="#preparing-data-in-a-reproducible-way" id="toc-preparing-data-in-a-reproducible-way" class="nav-link" data-scroll-target="#preparing-data-in-a-reproducible-way"><span class="header-section-number">2.1</span> Preparing data in a reproducible way</a></li>
  <li><a href="#creating-reproducible-analyses-tables-and-figures" id="toc-creating-reproducible-analyses-tables-and-figures" class="nav-link" data-scroll-target="#creating-reproducible-analyses-tables-and-figures"><span class="header-section-number">2.2</span> Creating reproducible analyses, tables and figures</a></li>
  </ul></li>
  <li><a href="#step-three-preparing-data-and-code-for-sharing" id="toc-step-three-preparing-data-and-code-for-sharing" class="nav-link" data-scroll-target="#step-three-preparing-data-and-code-for-sharing"><span class="header-section-number">3</span> STEP THREE: Preparing data and code for sharing</a>
  <ul class="collapse">
  <li><a href="#preparing-code-for-public-sharing" id="toc-preparing-code-for-public-sharing" class="nav-link" data-scroll-target="#preparing-code-for-public-sharing"><span class="header-section-number">3.1</span> Preparing code for public sharing</a>
  <ul class="collapse">
  <li><a href="#extracting-code-from-notebooks---the-purl-function" id="toc-extracting-code-from-notebooks---the-purl-function" class="nav-link" data-scroll-target="#extracting-code-from-notebooks---the-purl-function"><span class="header-section-number">3.1.1</span> <strong>Extracting code from notebooks - the PURL function</strong></a></li>
  </ul></li>
  <li><a href="#running-the-analyses-from-r-script-files" id="toc-running-the-analyses-from-r-script-files" class="nav-link" data-scroll-target="#running-the-analyses-from-r-script-files"><span class="header-section-number">3.2</span> Running the analyses from R script files</a></li>
  <li><a href="#sharing-notebooks-with-co-authors" id="toc-sharing-notebooks-with-co-authors" class="nav-link" data-scroll-target="#sharing-notebooks-with-co-authors"><span class="header-section-number">3.3</span> Sharing notebooks with co-authors</a></li>
  <li><a href="#preparing-data-for-sharing" id="toc-preparing-data-for-sharing" class="nav-link" data-scroll-target="#preparing-data-for-sharing"><span class="header-section-number">3.4</span> Preparing data for sharing</a></li>
  </ul></li>
  <li><a href="#step-four-sharing-code-and-data-in-open-repository" id="toc-step-four-sharing-code-and-data-in-open-repository" class="nav-link" data-scroll-target="#step-four-sharing-code-and-data-in-open-repository"><span class="header-section-number">4</span> STEP FOUR: Sharing code and data in open repository</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Baby Steps for a Reproducible Workflow in R</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 18, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>The idea of <em>methods reproducibility</em> is to provide sufficient documentation of procedures and data to enable repeating the same procedures, in a similar or different context (Goodman et al., 2016). A reproducible workflow, then, is a systematically organized sequence of steps to accomplish this. As the value placed on reproducibility continues to rise within and beyond academia, mastering these practices is increasingly beneficial. This tutorial aims to present the basics rather than delve into all the complexities of all advanced stuff. It covers steps from preparing data for analysis to creating reproducible tables and figures, to be included in a paper or presentation.</p>
<p><strong>The basic steps for reproducible workflow are:</strong></p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    step1("1. Set up the project &lt;br&gt; ")
    step2("2. Prepare and analyse data &lt;br&gt; and generate outputs")
    step3("3. Prepare code and data &lt;br&gt; for sharing")
    step4("4. Share in public")
    
    step1 --&gt; step2 --&gt; step3 --&gt; step4
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p><strong>A reproducible workflow enables you to:</strong></p>
<ul>
<li><p>Adjust code or data and efficiently re-run all analyses.</p></li>
<li><p>Conduct a review before publishing, covering phases from data preparation to generation of outputs.</p></li>
<li><p>Understand your research processes months later, effectively collaborating with your future self.</p></li>
<li><p>Share or pass along your project and provide the necessary code for others to extend your work.</p></li>
<li><p>Enhance the credibility and trustworthiness of your research.</p></li>
</ul>
<p>The guide and provided code snippets serve as a template for initiating new projects or creating reproducible versions of existing ones. The best way to learn is to download the notebooks, experiment with the examples in RStudio, and adapt them to your project and preferences. To follow along, ensure that you have R and RStudio installed and up to date.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>These basic steps can be expanded to include e.g., producing a fullmanuscript in RStudio, managing version control with tools like Git, and ensuring computational reproducibility through containerization technologies such as Docker. See resources page for more.</p>
</div>
</div>
<section id="step-one-creating-project-and-folder-structure" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> STEP ONE: Creating project and folder structure</h1>
<p>We begin with creating a tidy nest for all files related to the study/project. Or at least for the files related to data and analysis! Creating a coherent folder structure that can be used in all your future research projects will facilitate collaboration and make your life easier - with more time for reproduction!</p>
<section id="create-a-rstudio-project" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="create-a-rstudio-project"><span class="header-section-number">1.1</span> Create a RStudio project</h2>
<ul>
<li><p>In RStudio, start fresh and select File - New Project - New Directory - Empty Project.</p></li>
<li><p>Copy and run below code <strong>in RStudio</strong> <strong>console</strong> window to download this notebook to your project folder. (or download <strong>from here</strong> and save to project folder)</p>
<p><code>download.file("https://juusorepo.github.io/IODS-project/chapter1.Rmd", "baby-steps.qmd")</code></p></li>
<li><p>Open the notebook in RStudio.</p></li>
<li><p>Run the below code chunk to install required packages. Tip: place cursor inside the chunk and press Ctrl+Shift+Enter. The Here package simplifies file path management by making all paths relative to the project root.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code: Load packages</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Load packages: knitr and here</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Here  for file path management and Knitr for dynamic report generation</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if packages are installed, and install if not</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"knitr"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {<span class="fu">install.packages</span>(<span class="st">"knitr"</span>)}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"here"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {<span class="fu">install.packages</span>(<span class="st">"here"</span>)}</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(knitr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code: Need help with the file?</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If errors, you may set the working directory with this function (uncomment it)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check your working directory</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># getwd()</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set your working directory</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># setwd("c:/your-path-to-project-folder/")</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the file is found</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="fu">here</span>(<span class="st">"babysteps.qmd"</span>))) {</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Babysteps file found!"</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Note! Please check the babysteps.qmd file and your working directory."</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Babysteps file found!"</code></pre>
</div>
</div>
</section>
<section id="creating-the-project-folder-structure" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="creating-the-project-folder-structure"><span class="header-section-number">1.2</span> Creating the project folder structure</h2>
<p>The code below will create a coherent folder structure for your project. You can modify the folder names for your own project as needed. Alternatively, you may create folders without code. Note these good practices when working with folders and files:</p>
<ul>
<li><p><strong>Naming conventions</strong> for folders and files: only lowercase letters; no spaces but-dashes (or_underscores) instead. Prefix numbers with leading zeros ensure automatic sorting (01-data, 02-scripts…).</p></li>
<li><p><strong>Relative file paths</strong>. Always use relative folder paths for reproducibility. Relative means <code>data/file.csv</code> instead of absolute one: <code>C:/Users/Documents…./file.csv</code></p></li>
<li><p><strong>Here</strong> -<strong>function (optional)</strong>. Wrap the file path with the here function to ensure the path is always relative to the project root and works in all contexts, e.g., <code>here("data/file.csv")</code>. Requires R package Here.</p></li>
<li><p><strong>Separate folders for public sharing.</strong> For our reproducible example, we will only need the folders: data, scripts, and supplementary for public sharing<em>.</em></p></li>
</ul>
<p>Run the code below to create your folders.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List folder names into a vector object, folders not used for tutorial are commented out</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>folders <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"01-data"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"01-data/raw"</span>, <span class="co"># Unmodified, original raw data</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"01-data/processed"</span>, <span class="co"># Data after cleaning or transformations</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"01-data/metadata"</span>, <span class="co"># Codebooks, dictionaries etc.</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   "01-data/methods", # Ethics, protocols, licenses etc.</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"02-scripts"</span>, <span class="co"># Scripts for public sharing</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"03-supplementary"</span>, <span class="co"># Additional material for public sharing</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"04-notebooks"</span>, <span class="co"># Notebooks for running analyses and writing notes</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"05-outputs"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"05-outputs/figures"</span>, <span class="co"># Main graphs and visualizations</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"05-outputs/tables"</span>, <span class="co"># Main result tables</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   "05-outputs/manuscripts", # Drafts and final versions of papers</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   "05-outputs/presentations", # Slides, posters, etc.</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"99-archive"</span> <span class="co"># Archived materials, old versions </span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>)    </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create folders (loop through the vector) </span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (folder <span class="cf">in</span> folders) {<span class="fu">dir.create</span>(folder, <span class="at">recursive =</span> <span class="cn">TRUE</span>, <span class="at">showWarnings =</span> <span class="cn">TRUE</span>)}</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Print message</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">"Project folders created successfully."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Why was the reproducibility advocate bad at hide and seek?&nbsp; Because they always left a trail to reproduce their steps!</p>
</div>
</div>
</section>
</section>
<section id="step-two-preparing-and-analysing-data-and-generating-reproducible-tables-and-figures" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> STEP TWO: Preparing and analysing data and generating reproducible tables and figures</h1>
<p>Using notebooks instead of plain text .R scripts offers many benefits. Notebooks integrate code, results, and notes in one document, making them more readable, enhancing collaboration and reproducibility. In this tutorial, we will use Quarto notebooks (.qmd) which is a next generation version of R Markdown and becoming the new gold standard.</p>
<section id="preparing-data-in-a-reproducible-way" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="preparing-data-in-a-reproducible-way"><span class="header-section-number">2.1</span> Preparing data in a reproducible way</h2>
<p>For reproducibility, it is vital to keep the raw data untouched and create code which includes all steps done for processing and preparing the data for analysis. All data cleaning done in R ensures the transparency of your research.</p>
<p>A good open science practice (when possible) is to <strong>simulate data</strong> when planning analysis or preregistering your study (Peikert et al., 2021). Once the empirical data is available, you can replace the simulated data - and get the results quicker.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    step0("Simulate &lt;br&gt;and plan")
    step1("Collect")
    step2("Process")
    step3("Analyse and &lt;br&gt;generate outputs")
    step4a("Figures")
    step4b("Tables")
    step5("Manuscript or&lt;br&gt; presentation")
    step6("Text")
    
    step0 --&gt; step1 --&gt; step2 --&gt; step3 --&gt; step4a
    step3 --&gt; step4b
    step4a --&gt; step5
    step4b --&gt; step5
    step6 --&gt; step5
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>For this tutorial, we simulate a study on baby steps. In the first notebook we create raw data and a sample codebook.</p>
<ul>
<li><strong>Download the simulate-data notebook</strong> by running the code below (if not downloaded already)</li>
<li><strong>Open the notebook</strong> and run all code.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download simulate-data notebook </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#download.file("https://juusorepo.github.io/IODS-project/chapter1.Rmd", </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#              "04-notebooks/00-simulate-data.qmd")</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">"Notebook is saved in your Notebooks -folder. Open and run the code."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Notebook is saved in your Notebooks -folder. Open and run the code.</code></pre>
</div>
</div>
<p>Prepare-data -notebook is an example and a template for creating reproducible steps for processing raw data.</p>
<ul>
<li><strong>Download the prepare-data notebook</strong> by running the code below (if not downloaded already)</li>
<li><strong>Open the notebook</strong> and run all code.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download prepare-data notebook</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#download.file("https://juusorepo.github.io/IODS-project/chapter1.Rmd", </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#             "04-notebooks/01-prepare-data.qmd")</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">"Notebook is saved in your Notebooks -folder. Open and run the code."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Notebook is saved in your Notebooks -folder. Open and run the code.</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can create your own notebook by selecting: File - New File - R Notebook (in RStudio).</p>
<p>Organize your analyses into multiple notebooks. A good practice is to number them following your analytic plan.</p>
</div>
</div>
</section>
<section id="creating-reproducible-analyses-tables-and-figures" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="creating-reproducible-analyses-tables-and-figures"><span class="header-section-number">2.2</span> Creating reproducible analyses, tables and figures</h2>
<p>The next notebook shows how to create reproducible tables and figures in R. Also in APA style! This will avoid the need for copy-pasting values from R to a word processor, ensuring fewer errors and - better reproducibility! You can export the formatted table into Word, PowerPoint, HTML, or pdf.</p>
<ul>
<li><strong>Download the notebook</strong> by running the code below.</li>
<li><strong>Open the notebook</strong> to follow and run the examples.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download a notebook for creating tables</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># download.file("https://juusorepo.github.io/IODS-project/chapter1.Rmd", </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#              here("04-notebooks/02-create-tables-and-figures.qmd"))</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">"Descript -notebooks downloaded and saved in your notebooks -folder. Open and try!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Descript -notebooks downloaded and saved in your notebooks -folder. Open and try!</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Why did the scientist break up with reproducibility?<br>
Because they wanted a relationship with fewer variables!</p>
</div>
</div>
</section>
</section>
<section id="step-three-preparing-data-and-code-for-sharing" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> STEP THREE: Preparing data and code for sharing</h1>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    step0("Prepare data&lt;br&gt; for sharing")
    step1("Prepare notebooks&lt;br&gt; for sharing")
    step2("Extract code from&lt;br&gt; notebooks with purl")
    step3("Test the code scripts")
    step1a("Share notebooks&lt;br&gt;with colleagues")
    step4("Share code and&lt;br&gt; data in public")
    
    step1 --&gt; step2 --&gt; step3 --&gt; step4
    step1 --&gt; step1a
    step0 --&gt; step4
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<section id="preparing-code-for-public-sharing" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="preparing-code-for-public-sharing"><span class="header-section-number">3.1</span> Preparing code for public sharing</h2>
<ul>
<li><strong>Comment the code.</strong> Make sure the code you plan to share is properly commented. Good practice is to write the comments before you write the code. If you lack comments, you can use Chat GPT to <em>assist</em> and review your code (with caution, naturally). With the prompt below, you can keep adding your scripts one at a time. Replace your code with the commented version, and test the code. Example prompt:</li>
</ul>
<blockquote class="blockquote">
<p>Dearest AI, please revise and improve the comments in my R script to increase its clarity and convey its purpose, without changing the code itself. Identify any errors separately and alert me to potential reproducibility issues. I will submit sections of the code sequentially for your review.</p>
</blockquote>
<ul>
<li><strong>Use README files</strong>. For complicated scripts and analyses, you can add a README text file with extensive documentation.</li>
<li><strong>For a style guide</strong> for coding in R, see: <a href="https://style.tidyverse.org/" class="uri">style.tidyverse.org</a>. It includes best practices for e.g., naming objects, and tools for reviewing your code.</li>
<li><strong>Document R version and packages used.</strong> Documenting ‘dependencies’ ensures that future researchers can replicate the exact computational environment in which your analysis was conducted. With the report package, you can create this as a supplementary file with the code below.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a supplementary file with R version and packages used</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># load report package</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"report"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {<span class="fu">install.packages</span>(<span class="st">"report"</span>)}</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(report)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dependencies report</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>dependencies <span class="ot">&lt;-</span> <span class="fu">report</span>(<span class="fu">sessionInfo</span>())</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Export report as a supplementary text file </span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(dependencies, <span class="fu">here</span>(<span class="st">"03-supplementary/dependencies.txt"</span>))</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co"># print a summary of the report</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">"Dependencies summary saved in the 03-supplementary -folder. A brief summary:"</span>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">report</span>(<span class="fu">sessionInfo</span>()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The analysis was done using the R Statistical language (v4.2.0; R Core Team,
2022) on Ubuntu 22.04.4 LTS, using the packages report (v0.5.8), here (v1.0.1)
and knitr (v1.45).</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>For automated computational reproducibility, you can use* <a href="https://rstudio.github.io/renv/articles/renv.html">renv</a> *for dependency management or Docker for containerization.</p>
</div>
</div>
<section id="extracting-code-from-notebooks---the-purl-function" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="extracting-code-from-notebooks---the-purl-function"><span class="header-section-number">3.1.1</span> <strong>Extracting code from notebooks - the PURL function</strong></h3>
<p>As you may have noticed from the example notebooks, we used notebooks also for personal notes and exploratory analyses. How can one manage all that in the same file? With help from the ‘purl’ function!</p>
<p>The “purl” function from the knitr package will extract all executable code from the notebooks and save them in in an .R script file - for public sharing. The trick is that it only extracts the code chunks with comments, not the notes (text outside code chunks) or results. In addition, the code chunks marked with <strong>purl=FALSE</strong> (in the title, see example below), will <strong>not be included</strong> in the .R script file created. Thus, you can keep draft analyses and personal notes in the same notebook with the code for public sharing.</p>
<ul>
<li><p><strong>Run the code</strong> below to create .R script files from the notebooks.</p></li>
<li><p><strong>Open an .R script file</strong> created to view the result.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract simulate-data: use purl to extract r-code from notebook into script file</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">purl</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">"04-notebooks/00-simulate-data.qmd"</span>), <span class="co"># the source notebook </span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">output=</span><span class="fu">here</span>(<span class="st">"02-scripts/00-simulate-data.R"</span>), <span class="co"># the output script file</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">documentation =</span> <span class="dv">1</span> <span class="co"># to include only the code chunks</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1/6                 
2/6 [setup-simulate]
3/6                 
4/6 [codebook]      
5/6                 
6/6 [simulate-data] </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/home/runner/work/ReproRepo/ReproRepo/02-scripts/00-simulate-data.R"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract prepare-data</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">purl</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">"04-notebooks/01-prepare-data.qmd"</span>), </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">output=</span><span class="fu">here</span>(<span class="st">"02-scripts/01-prepare-data.R"</span>), </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">documentation =</span> <span class="dv">1</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1/23                             
2/23 [setup_prepare]             
3/23                             
4/23 [display_data_structure]    
5/23                             
6/23 [modify-data-types]         
7/23                             
8/23 [Initial-EDA]               
9/23                             
10/23 [Missing-values]            
11/23                             
12/23 [Correcting Errors]         
13/23                             
14/23 [Handling Outliers]         
15/23                             
16/23 [Standardize Variable Names]
17/23                             
18/23 [Recoding variables]        
19/23                             
20/23 [EDA-with-processed-data]   
21/23                             
22/23 [Save dataset]              
23/23                             </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/home/runner/work/ReproRepo/ReproRepo/02-scripts/01-prepare-data.R"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract create-tables-and-figures</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">purl</span>(<span class="fu">here</span>(<span class="st">"04-notebooks/02-create-tables-and-figures.qmd"</span>), </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">output=</span><span class="fu">here</span>(<span class="st">"02-scripts/02-create-tables-and-figures.R"</span>),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">documentation =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1/27                                   
2/27 [load-processed-data-and-packages]
3/27                                   
4/27 [skim-summary]                    
5/27                                   
6/27 [tbl-summary]                     
7/27                                   
8/27 [tbl-preview-summary]             
9/27                                   
10/27 [export-outputs]                  
11/27                                   
12/27 [tbl-linear-regression]           
13/27                                   
14/27 [preview-tbl-linear-regression]   
15/27                                   
16/27 [tbl-mixed-effects]               
17/27                                   
18/27 [fig-coefs]                       
19/27                                   
20/27 [fig1-preview]                    
21/27                                   
22/27 [report-results-lm]               
23/27                                   
24/27 [report-results-mixed]            
25/27                                   
26/27 [fig-interaction]                 
27/27                                   </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/home/runner/work/ReproRepo/ReproRepo/02-scripts/02-create-tables-and-figures.R"</code></pre>
</div>
</div>
</section>
</section>
<section id="running-the-analyses-from-r-script-files" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="running-the-analyses-from-r-script-files"><span class="header-section-number">3.2</span> Running the analyses from R script files</h2>
<p>After the R script files are created, it is good to test the scripts before sharing. You can use the following code chunk to re-run your analyses without opening the R script files. It is good practice to empty the R environment before running the analyses.</p>
<ul>
<li><p>Restart R Session in RStudio: Select <code>Session &gt; Restart R</code></p></li>
<li><p>Run the below code chunk.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run analyses from R -----------------------------------------</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Clears all objects from memory to ensure reproducibility</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 0 Simulate data</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">"02-scripts/00-simulate-data.R"</span>))</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 Prepare data</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">"02-scripts/01-prepare-data.R"</span>))</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 2 Run analyses to create tables</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">"02-scripts/02-create-tables-and-figures.R"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Tip: You can run one row at a time by placing your cursor in the row and pressing Ctrl+Enter.</em></p>
<p><em>Tip: Starting each code chunk with “title-for-chunk ————————————” will break up your script file into easily readable chunks.</em></p>
<p><em>Note. the Purl function is not perfect. It may not work with all types of code, and you may need to do some manual editing. For example, it may not work with some types of loops or functions. It is also good to check the script file for any errors or missing parts.</em></p>
</section>
<section id="sharing-notebooks-with-co-authors" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="sharing-notebooks-with-co-authors"><span class="header-section-number">3.3</span> Sharing notebooks with co-authors</h2>
<p>Best way to share some analyses with your colleagues? Notebooks are great for that. They can be read in any browser and can include code and your notes and questions for your colleagues. Although maybe intimidating to show others your code, it’s an important step in making your research reproducible. With this example, we render/knit one notebook into html format for sharing,</p>
<ul>
<li><p>Open one of the notebooks, for example 01-prepare-data.qmd</p></li>
<li><p>Select Render. RStudio will render the notebook into a .html file, which you can easily share. You can change the output format with inserting the following in the very top of the notebook “format: html” and changing the html to pdf, docx, or other format.</p></li>
</ul>
</section>
<section id="preparing-data-for-sharing" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="preparing-data-for-sharing"><span class="header-section-number">3.4</span> Preparing data for sharing</h2>
<p>For full reproducibility, share your raw data when possible. Check these steps before sharing:</p>
<ul>
<li><p><strong>Consent</strong>. Ensure you have consent from the study participants and your institution to share the data.</p></li>
<li><p><strong>Format</strong>. Make sure your data is in open file format like .csv.</p></li>
<li><p><strong>Documentation</strong>. Include necessary documentation in the metadata folder (e.g., codebooks, readme, licenses, ethics). Use open file formats. See example codebook in the simulate-data notebook.</p></li>
<li><p><strong>De-identify.</strong> If needed, prepare a de-identified version of your raw data to manage the risk of identifying individuals in the dataset.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>What’s a reproducible researcher’s favorite movie?<br>
“Groundhog Day” – they love seeing the same results every time!</p>
</div>
</div>
</section>
</section>
<section id="step-four-sharing-code-and-data-in-open-repository" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> STEP FOUR: Sharing code and data in open repository</h1>
<p>The final step is to create an OSF project and upload the files there. Open Science Framework (OSF) is a free, open-source service that connects the entire research lifecycle: planning, execution, reporting, archiving, and discovery. Alternatively, you can use other services such as Zenodo, Figshare, or Github.</p>
<ol type="1">
<li>Create a user and/or login at: <a href="https://osf.io/" class="uri">https://osf.io/</a></li>
<li>Create a new project in OSF (you may keep the project private when testing)</li>
<li>Create necessary folders with similar names as in your project folders. Start with these, maybe nothing else is needed: (data/raw, data/metadata, scripts)</li>
<li>Upload the files to the folders created (in our example: raw data and three script files)</li>
<li>Create a DOI (permanent link) for your project in OSF and start sharing!</li>
</ol>
<p><em>Congrats on walking the first steps! In the fascinating world of reproducibility, there is always more. Advanced issues like dependency management, version control, licencing, and writing a full manuscript in RStudio are not covered here. See the links attached if you are interested in learning more. Who says making good science doesn’t mean a lot of work?</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/juusorepo\.github\.io\/ReproRepo\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>